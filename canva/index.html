<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create your Leads Design</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="./style.css">
    <link rel="stylesheet" href="//unpkg.com/grapesjs/dist/css/grapes.min.css">
    <link rel="stylesheet" href="./external.css">
    <!-- <link rel="stylesheet" href="./contextMenu.css"> -->

</head>

<body>
    <!-- Header Section Start Here-------------------------------------------------->
    <nav class="navbar navbar-expand-lg bg-body-tertiary fixed-top navbartag ">
        <div class="container-fluid">
            <div class="logo_img">
                <img src="https://static.canva.com/web/images/12487a1e0770d29351bd4ce4f87ec8fe.svg" alt="">
            </div>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse nav_item_main_div" id="navbarSupportedContent">
                <ul class="navbar-nav mb-2 mb-lg-0 ">
                    <li class="nav-item">
                        <a class="nav-link active " aria-current="page">Home</a>
                    </li>
                    <li class="nav-item navbar_dropdown">
                        <a class="nav-link" href="Desgin">Template <i
                                class="fa-solid fa-angle-down dropdown_icon"></i></a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="Desgin">Collection</a>
                    </li>
                    <li class="nav-item navbar_dropdown">
                        <a class="nav-link" href="explore">Explore <i
                                class="fa-solid fa-angle-down dropdown_icon"></i></a>
                    </li>
                </ul>
                <div class="form-check form-switch">
                    <button>Create a desgin</button>



                </div>
            </div>
    </nav>
    <!-- header Section End Here  ------------------------------------------->
    <!-- Side bar and content area start here------------------------------------->
    <div class="conatiner set_overflow_y">
        <div class="row position-relative w-100">
            <div class="col-3 sidebar_menu_col3">
                <div class="row p-0 sidebar_inner_element_row">
                    <div class="col-1 sidebar_menu_link_div">
                        <!-- SideBar clicked Menu Start Here  -->
                        <div class="link_div show_element_menu sidemenu_active" onclick="showPhotosElement(this)">
                            <i class="fa-solid fa-clapperboard"></i>
                            <span>Photos</span>
                        </div>
                        <div class="link_div " onclick="showPhotosElement(this)">
                            <i class="fa-solid fa-clapperboard"></i>
                            <span>Uploads</span>
                        </div>
                        <div class="link_div" onclick="showPhotosElement(this)">
                            <i class="fa-solid fa-clapperboard"></i>
                            <span>Text</span>
                        </div>
                        <!-- SideBar clicked Menu Start Here  -->


                    </div>
                    <!-- Photo Menu elements Div start here  -->

                    <div class="col-2 sidebar_element_div" id="PhotosElement">
                        <div class="col-12 p-0 sidebar_heading_div photo_heading_filter">
                            <div class="app_sidebar_heading">Choose For Design</div>
                            <i class="fa-solid fa-arrow-down-wide-short filter_icon"  onclick="filterData(this)"></i>
                        </div>
                        <div class="row sidebar_element_row" id="photosElementRow">
                            

                            <div class="button_div_display_block" id="loader">
                                <div class="spinner-border position-absolute top-20 left-50" role="status"><span
                                        class="visually-hidden">Loading...</span>
                                </div>
                            </div>

                            <!-- <div class="col-4 p-0 element_image_cols">
                                <img src="../download.jpg" alt="" class="img-fluid" />
                            </div>
                            <div class="col-4 p-0 element_image_cols">
                                <img src="https://static.canva.com/web/images/12487a1e0770d29351bd4ce4f87ec8fe.svg"
                                    alt="" class="img-fluid" />
                            </div>
                            <div class="col-4 p-0 element_image_cols">
                                <img src="https://static.canva.com/web/images/12487a1e0770d29351bd4ce4f87ec8fe.svg"
                                    alt="" class="img-fluid" />
                            </div>
                            <div class="col-4 p-0 element_image_cols">
                                <img src="https://static.canva.com/web/images/12487a1e0770d29351bd4ce4f87ec8fe.svg"
                                    alt="" class="img-fluid" />
                            </div>
                            <div class="col-4 p-0 element_image_cols">
                                <img src="https://static.canva.com/web/images/12487a1e0770d29351bd4ce4f87ec8fe.svg"
                                    alt="" class="img-fluid" />
                            </div>
                            <div class="col-4 p-0 element_image_cols">
                                <img src="https://static.canva.com/web/images/12487a1e0770d29351bd4ce4f87ec8fe.svg"
                                    class="img-fluid" alt="" />
                            </div> -->
                        </div>
                    </div>
                    <!-- Photos Menu elements Div start here  -->


                    <!-- Upload Menu elements Div start here  -->
                    <div class="col-2 sidebar_element_div hide_element_div" id="UploadElement">
                        <div class="row sidebar_element_row">
                            <div class="col-12 p-0 sidebar_heading_div">
                                <div class="app_sidebar_heading">Uploaded Image</div>
                                <i class="fa-solid fa-camera"></i>
                            </div>
                            <div class="button_div position-relative" id="userUploadBox">                             

                                <button class="upload_btn">Upload Image <i class="fa-solid fa-camera"></i>
                                <input type="file" id="imageUpload" onchange="uploadUserImage(event)" class="position-absolute upload_image_input" accept="image/*" multiple></button>
                            </div>

                            <div id="uploadUserImage" class="d-flex align-items-start justify-space-between upload_user_div_area">

                            </div>


                          
                              <!-- <div class="col-4 p-0 element_image_cols">
                                <img src="https://static.canva.com/web/images/12487a1e0770d29351bd4ce4f87ec8fe.svg"
                                    alt="" class="img-fluid" />
                            </div>
                            <div class="col-4 p-0 element_image_cols">
                                <img src="https://static.canva.com/web/images/12487a1e0770d29351bd4ce4f87ec8fe.svg"
                                    alt="" class="img-fluid" />
                            </div>
                            <div class="col-4 p-0 element_image_cols">
                                <img src="https://static.canva.com/web/images/12487a1e0770d29351bd4ce4f87ec8fe.svg"
                                    alt="" class="img-fluid" />
                            </div>
                            <div class="col-4 p-0 element_image_cols">
                                <img src="https://static.canva.com/web/images/12487a1e0770d29351bd4ce4f87ec8fe.svg"
                                    alt="" class="img-fluid" />
                            </div>
                            <div class="col-4 p-0 element_image_cols">
                                <img src="https://static.canva.com/web/images/12487a1e0770d29351bd4ce4f87ec8fe.svg"
                                    class="img-fluid" alt="" />
                            </div> -->
                        </div>
                    </div>



                    <!-- Upload Menu elements Div end here  -->


                    <!-- Text Menu elements Div start here  -->
                    <div class="col-2 sidebar_element_div hide_element_div" id="TextElement">


                        <div class="row sidebar_element_row">

                            <div class="col-12 p-0 sidebar_heading_div">
                                <div class="app_sidebar_heading">Style Your Text</div>
                                <i class="fa-solid fa-camera"></i>
                            </div>
                            <div class="button_div">
                                <button class="upload_btn" onclick="addText()">Add Text <i class="fa-solid fa-camera"></i></button>
                            </div>



                            <!-- <div class="col-4 p-0 element_image_cols">
                                <img src="../download.jpg" alt="" class="img-fluid" />
                            </div>
                            <div class="col-4 p-0 element_image_cols">
                                <img src="https://static.canva.com/web/images/12487a1e0770d29351bd4ce4f87ec8fe.svg"
                                    alt="" class="img-fluid" />
                            </div>
                            <div class="col-4 p-0 element_image_cols">
                                <img src="https://static.canva.com/web/images/12487a1e0770d29351bd4ce4f87ec8fe.svg"
                                    alt="" class="img-fluid" />
                            </div>
                            <div class="col-4 p-0 element_image_cols">
                                <img src="https://static.canva.com/web/images/12487a1e0770d29351bd4ce4f87ec8fe.svg"
                                    alt="" class="img-fluid" />
                            </div>
                            <div class="col-4 p-0 element_image_cols">
                                <img src="https://static.canva.com/web/images/12487a1e0770d29351bd4ce4f87ec8fe.svg"
                                    alt="" class="img-fluid" />
                            </div>
                            <div class="col-4 p-0 element_image_cols">
                                <img src="https://static.canva.com/web/images/12487a1e0770d29351bd4ce4f87ec8fe.svg"
                                    class="img-fluid" alt="" />
                            </div> -->
                        </div>
                    </div>



                    <!-- Text Menu elements Div end here  -->

                    <!-- Set Border elements Div start here  -->
                    <div class="col-2 sidebar_element_div hide_element_div" id="SetBorderElement">


                        <div class="row sidebar_element_row">

                            <div class="col-12 p-0 sidebar_heading_div">
                                <div class="app_sidebar_heading">Set Border</div>
                                <i class="fa-solid fa-grip-lines"></i>
                            </div>
                            <div class="filter_controls px-0 pb-2">
                                <span class="filter_fonts">Set Border</span>
                                <input type="range" min="1" max="10" step="1" value="1"  class="range_input" id="range_border_input" onchange="setBorderSize()">
                              
           <span class="filter_fonts">Border Size:-  <span id="bordervalue"></span></span>

                            </div>

<div id="uploadUserImage" class="d-flex align-items-start justify-space-between upload_user_div_area my-3 gap-2">
    <div class="col-4 p-0 upload_user_image_col color_card" onclick="getBorderColor(this)">
      
    </div>
    <div class="col-4 p-0 upload_user_image_col color_card bg-f97316" onclick="getBorderColor(this)">
      
    </div>

    <div class="col-4 p-0 upload_user_image_col color_card bg-ea580c" onclick="getBorderColor(this)">
      
    </div>
    <div class="col-4 p-0 upload_user_image_col color_card bg-fbbf24" onclick="getBorderColor(this)">
      
    </div>
<div class="col-4 p-0 upload_user_image_col color_card position-relative" onclick="getBorderColor(this)">
        <input type="color" id="textColor" name="favcolor" class="fa-solid text_colorpicker border_color_input" value="#000000"title="Change Text Color" >
    </div>
</div>


                          
                        </div>
                    </div>



                    <!-- Set Border elements Div end here  -->

                      <!-- Set Border elements Div start here  -->
                      <div class="col-2 sidebar_element_div hide_element_div" id="SetColorsElement">


                        <div class="row sidebar_element_row">
                              
                            <div class="col-12 p-0 sidebar_heading_div">
                                <div class="app_sidebar_heading">Set Color</div>
                                <i class="fa-solid fa-grip-lines"></i>
                            </div>
                            <div class="group_color mb-2">
                                <div class="col-12 group_color_option" onclick="setTypeColor(this, event)" id="textBg">Set Text Background color</div>
                                <div class="col-12 group_color_option" onclick="setTypeColor(this, event)" id="textcolor">Set Text color</div>
                                <div class="col-12 group_color_option" onclick="setTypeColor(this, event)" id="pagecolor">Set Page Background color</div>

                            </div>
                            <div class="filter_controls px-0 pb-2">
                                <span class="filter_fonts">Set padding</span>
                                <input type="range" min="1" max="10" step="1" value="1"  class="range_input" id="textPaddingInput" onchange="setPadding(this)">
                              
                                 <span class="filter_fonts">Padding :-  <span id="textpaddingValue"></span></span>

                              

                            </div>

<div id="uploadUserImage" class="d-flex align-items-start justify-space-between upload_user_div_area my-3 gap-2">
    <div class="col-4 p-0 upload_user_image_col color_card" onclick="setObjectColor(this)">
      
    </div>
    <div class="col-4 p-0 upload_user_image_col color_card bg-f97316" onclick="setObjectColor(this)">
      
    </div>

    <div class="col-4 p-0 upload_user_image_col color_card bg-ea580c" onclick="setObjectColor(this)">
      
    </div>
    <div class="col-4 p-0 upload_user_image_col color_card bg-fbbf24" onclick="setObjectColor(this)">
      
    </div>
    <div class="col-4 p-0 upload_user_image_col color_card bg-black" onclick="setObjectColor(this)">
      
    </div>
    <div class="col-4 p-0 upload_user_image_col color_card bg-38bdf8" onclick="setObjectColor(this)">
      
    </div><div class="col-4 p-0 upload_user_image_col color_card bg-7c3aed" onclick="setObjectColor(this)">
      
    </div><div class="col-4 p-0 upload_user_image_col color_card bg-dc2626" onclick="setObjectColor(this)">
      
    </div><div class="col-4 p-0 upload_user_image_col color_card bg-black" onclick="setObjectColor(this)">
      
    </div>
<div class="col-4 p-0 upload_user_image_col color_card position-relative" onclick="getBorderColor(this)">
        <input type="color" id="textColor" name="favcolor" class="fa-solid text_colorpicker border_color_input" value="#000000"title="Change Text Color" >
    </div>
</div>


                          
                        </div>
                    </div>



                    <!-- Set Border elements Div end here  -->

                </div>

            </div>
            
           
            <div class="col-9 Desigin_div_start position-relative" id="desginingPart">
              
                <!-- canvas pages Start Here -->
             
                <div class="deasginarea_div" id="CanvasOuterHeight">
                    <div class="objects_control position-absolute">
                        <div class="control_group_icon">
                            <i class="fa-solid fa-bold"   title="Bold" onclick="setBold()"></i>
                            <i class="fa-solid fa-italic"   title="Italic" onclick="setItalic()"></i>
                            <i class="fa-solid fa-underline"   title="Underline" onclick="setUnderline()"></i>
                            <div class="colors"  onclick="openColorPlatte(this, event)"></div>
                            <i class="fa-brands fa-slack"  title="Flip-X" onclick="setFlipX(event)"></i>
                            <i class="fa-brands fa-slack"  title="Flip-Y" onclick="setFlipY(event)"></i>
                            <i class="fa-solid fa-grip-lines"  title="Set Borders" onclick="setBorder(this,event)"></i>
                            <i class="fa-solid fa-rotate-right"  title="Rotate-90deg" onclick="setRotateImage(event)"></i>

                            <!-- font-size div element Starts Here -->
<div class="font_size_text">
    <span class="font_size_button" onclick="downfontSize(this, event)">-</span>
    <span class="font_size_button number" id="fontSizeNumber">14</span>
    <span class="font_size_button" onclick="upfontSize(this, event)">+</span>
</div>

                            <!-- font-size div element End Here -->

                        </div>

                        <div class="filters" onclick="expandFilters(this , event)" >
                            <div class="show_filter" id="filter_area">Edit Image <i class="fa-solid fa-angle-down"></i></div>

                            
                            <div class="filter_controls">
                                <span class="filter_fonts">Control <span id="setFilterName">Filter</span></span>
                                <input type="range" min="0" max="1000" step="20"  class="range_input" id="range_input" onchange="changeFilterValue(this)">
                              
                                <span class="filter_fonts">Filter Value:-  <span id="setFilterValue"></span></span>

                            </div>
                            <div class="filter_list">
                                        <span class="filter_fonts py-1" onclick="setFilters(this, event)">Brightness</span>
                                        <span class="filter_fonts py-1" onclick="setFilters(this, event)">Invert</span>
                                        <span class="filter_fonts py-1" onclick="setFilters(this, event)">GrayScale</span>
                                        <span class="filter_fonts py-1" onclick="setFilters(this, event)">Contrast</span>
                                        <span class="filter_fonts py-1" onclick="setFilters(this, event)">Saturate</span>
                                        <span class="filter_fonts py-1" onclick="setFilters(this, event)">Blur</span>
                                        <span class="filter_fonts py-1" onclick="setFilters(this, event)">Sepia</span>
                                        <span class="filter_fonts py-1" onclick="setFilters(this, event)">Hue-rotate</span>

                            </div>
                        </div>
                    </div>

                    <div class="area_canvas_content">
                        <div class="top_counter d-flex justify-content-between align-items-center">
                            <span>Page 1</span>
                            <div class="right d-flex justify-content-between align-items-center set_width">
                                <i class="fa-solid fa-circle-plus" onclick="addPage()"></i>
                                <i class="fa-solid fa-trash"></i>
                            </div>
                        </div>
                        <div class="canvas_area selected_canvas_class" id="canvasArea" onclick="selectCanvas(this)"   ondragover="dragImageOver(event)" ondrop="dragImageDrop(event)" >
                              
                        </div>
                    </div>
                </div>

                <!-- canvas pages End Here -->

                
                 
                

            </div>
        </div>
    </div>
    <!-- Side bar and content area End here------------------------------------->

   





    <script src="./script.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/interactjs/dist/interact.min.js"></script>
    <script src="https://kit.fontawesome.com/1508b7bacb.js" crossorigin="anonymous"></script>
  <script>
    
// target elements with the "draggable" class
interact('#image-container')
  .draggable({
    // enable inertial throwing
    inertia: true,
    // keep the element within the area of it's parent
    modifiers: [
      interact.modifiers.restrictRect({
        restriction: 'parent',
        endOnly: true
      })
    ],
    // enable autoScroll
    autoScroll: true,

    listeners: {
      // call this function on every dragmove event
      move: dragMoveListener,

      // call this function on every dragend event
      end (event) {
        var textEl = event.target.querySelector('p')

        textEl && (textEl.textContent =
          'moved a distance of ' +
          (Math.sqrt(Math.pow(event.pageX - event.x0, 2) +
                     Math.pow(event.pageY - event.y0, 2) | 0))
            .toFixed(2) + 'px')
      }
    }
  })

function dragMoveListener (event) {
  var target = event.target
  // keep the dragged position in the data-x/data-y attributes
  var x = (parseFloat(target.getAttribute('data-x')) || 0) + event.dx
  var y = (parseFloat(target.getAttribute('data-y')) || 0) + event.dy

  // translate the element
  target.style.transform = 'translate(' + x + 'px, ' + y + 'px)'

  // update the posiion attributes
  target.setAttribute('data-x', x)
  target.setAttribute('data-y', y)
}

// this function is used later in the resizing and gesture demos
window.dragMoveListener = dragMoveListener

interact('#image-container').resizable({
    edges: { left: true, right: true, bottom: true, top: true },
    onmove: (event) => {
      const target = event.target;
      const x = (parseFloat(target.getAttribute('data-x')) || 0);
      const y = (parseFloat(target.getAttribute('data-y')) || 0);

      // Resize the image
      target.style.width = event.rect.width + 'px';
      target.style.height = event.rect.height + 'px';

      // Update data-x and data-y attributes
      target.setAttribute('data-x', x);
      target.setAttribute('data-y', y);
    },
  });

  interact('#image-container').resizable({
    edges: { left: true, right: true, bottom: true, top: true },
    // Add custom handles
    modifiers: [
      interact.modifiers.aspectRatio({ ratio: 'preserve' }),
      interact.modifiers.restrictEdges({
        outer: 'parent',
      }),
    ],
    onmove: (event) => {
      // Same as previous onmove logic
    },
  });



  
interact('.element')
  .draggable({
    // enable inertial throwing
    inertia: true,
    // keep the element within the area of it's parent
    modifiers: [
      interact.modifiers.restrictRect({
        restriction: 'parent',
        endOnly: true
      })
    ],
    // enable autoScroll
    autoScroll: true,

    listeners: {
      // call this function on every dragmove event
      move: dragMoveListener,

      // call this function on every dragend event
      end (event) {
        var textEl = event.target.querySelector('p')

        textEl && (textEl.textContent =
          'moved a distance of ' +
          (Math.sqrt(Math.pow(event.pageX - event.x0, 2) +
                     Math.pow(event.pageY - event.y0, 2) | 0))
            .toFixed(2) + 'px')
      }
    }
  })

function dragMoveListener (event) {
  var target = event.target
  // keep the dragged position in the data-x/data-y attributes
  var x = (parseFloat(target.getAttribute('data-x')) || 0) + event.dx
  var y = (parseFloat(target.getAttribute('data-y')) || 0) + event.dy

  // translate the element
  target.style.transform = 'translate(' + x + 'px, ' + y + 'px)'

  // update the posiion attributes
  target.setAttribute('data-x', x)
  target.setAttribute('data-y', y)
}

// this function is used later in the resizing and gesture demos
window.dragMoveListener = dragMoveListener




interact('.element').resizable({
    edges: { left: true, right: true, bottom: true, top: true },
    onmove: (event) => {
      const target = event.target;
      const x = (parseFloat(target.getAttribute('data-x')) || 0);
      const y = (parseFloat(target.getAttribute('data-y')) || 0);
      const fontSize = parseInt(getComputedStyle(target).fontSize, 10);

      
    const newWidth = event.rect.width;
    const newHeight = event.rect.height;

      // Update the font size based on the element's size
    const newFontSize = (newWidth + newHeight) / 2;
    target.style.fontSize = newFontSize + 'px';

     // You can also restrict the minimum font size if needed
     if (newFontSize < 12) {
      target.style.fontSize = '12px';
   
    }

    target.style.padding = "20px"
      // Update data-x and data-y attributes
      target.setAttribute('data-x', x);
      target.setAttribute('data-y', y);
    },
  });


  interact('.element').resizable({
    edges: { left: true, right: true, bottom: true, top: true },
    // Add custom handles
    modifiers: [
      interact.modifiers.aspectRatio({ ratio: 'preserve' }),
      interact.modifiers.restrictEdges({
        outer: 'parent',
      }),
    ],
    onmove: (event) => {
      // Same as previous onmove logic
    },
  });





  </script>
</body>

</html>